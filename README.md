# Crockpot - Client

![https://res.cloudinary.com/dqdjr1d4f/image/upload/v1712742105/README%20Images/Screenshot_2024-04-10_at_10.31.38_jdqjxd.png](hero image)

Crockpot is a recipe management and shopping list generation application written in Next.JS, Typescript and Tailwind. The purpose of this side project was to collate recipes (usually acquired through services like Hello Fresh or Gousto), link them to a custom database of ingredients, and have categorised shopping lists generated based on meal plans created through the selection of multiple recipes. This solves a few problems we had, namely that planning interesting meals and forming shopping lists is tiresome - while the project also provided the opportunity to try out Next.JS since the release of big changes.

Version 1 was originally a full stack project using React (as a SPA) with an Express backend in the same repository. This newer version has now been split into two repos for the purposes of deployment - with the client side Next.JS project in this repository and the backend API stored in [https://github.com/franciskershaw/crockpot-api](this separate repository). The link to the live site can be found [https://www.crockpot.app/browse](here).

## Table of Contents
- [Features](#features)
  - [Recipe Database](#recipe-database)
  - [Advanced Filtering](#advanced-filtering)
  - [Meal Planning and Favourites](#meal-planning-and-favourites)
  - [Shopping List](#shopping-list)
  - [Authentication](#authentication)
  - [Admin](#admin)
- [Installation](#installation)
- [Deployment](#deployment)
- [Technologies Used](#technologies-used)
- [Known Bugs](#known-bugs)
- [Future Releases](#future-releases)

## Features

### Recipe database

For all users, regardless of whether they have registered for an account or not, the website can be used as a means to browse and discover new recipes. Public facing recipes are approved by administrators so that inappropriate content is unlikely to be added, but users with login credentials are free to add their own recipes for use with the rest of the features when logged in. These user uploaded recipes are only visible to that specific user.

Clicking on the recipe card launches a modal housing all the information of the recipe, the ingredients and the instructions for cooking.

### Advanced Filtering

Recipes on the browse page can be filtered by a number of means, on their own or in conjunction with other filters:
- Search by name in a text box
- Recipe categories (Speedy, Baking, Air Fryer, etc.)
- Ingredients
- Serving Time
- 'My Recipes' (i.e. recipes uploaded by that user)

### Meal Planning and Favourites

Now into the good stuff. If a user is logged in, they have access to the 'Your Crockpot' page which adds major functionality to the site by allowing users to add meals to their 'menu' (essentially a meal plan) and to their favourites. New icons will appear over every recipe across the site, a shopping basket and a heart icon, which is how the users can interact with these features.

Clicking the shopping basket icon produces a dropdown that first asks the question of how many people the meal is intended for, before adding the recipe to your menu. This recipe is now visible in the 'Menu' section of the 'Your Crockpot' page for future reference.

The same idea applies to the Favourites icon, which a user can toggle on and off to add to the 'Favourites' tab in the 'Your Crockpot' page for convenience.

### Shopping List

The moment a single recipe has been added to the 'Menu', a shopping list is generated by category in the 'Your Crockpot' page. The logic is designed to account for repeated items across many recipes so that the quantities of the ingredients are combined into one listing instead of being repeated several times.

You can toggle a select box attributed to each item in a shopping list to indicate that you have 'obtained' the item during a shop, or delete the item entirely from the shopping list before a shop has commenced to remove items that you may already have at home. These deleted items can be re-added back into the list by clicking 'Clear Extra Items'.

Extra items that do not form part of the chosen recipes can also be added into the shopping list, think toothpaste or bin bags. Conversely, items already on the list can have their quantities amended if the user wishes to clean up the quantities or add/remove.

### Authentication

JWTs are used in the backend API to authenticate requests, and logic is used in the client to remove UI elements that are not permitted for users and protect pages from access to those who are not logged in or authorised.

### Mobile Responsive
The site was designed with a 'mobile first' approach, meaning that for the most part the user experience is not compromised by use on a mobile device. This was integral for the main use case of the application, in that a shopping list generated at home through the selection of recipes in a meal plan should be well presented when consulted on a mobile device during a food shop in a supermarket.

### Admin

For a select few users, an admin flag has been enabled in the database. This allows for access and edit permissions to all recipes, and for adding new 'Items' which is currently not permitted for a standard user.

## Installation
**Prerequisites**
- Node.JS version 20.9.0 installed
- NPM version 10.2.5 installed
- Installation steps followed in the API repository [https://github.com/franciskershaw/crockpot-api]((here)), with the server running and listening for incoming requests.

- Download the repository
- From the root, run `npm install`
- Create a `.env.local` file in the root of the project, with one variable:
```
NEXT_PUBLIC_API_URL=http://localhost:<port_of_choice_for_API>
```
- Run `npm run dev` from the root of the project

## Deployment

We kept deployment of this project on the client side very simple by deploying directly to [https://vercel.com/](Vercel). This was so we could make easy changes, with automatic deployments following merges to the main branch. Vercel redirects requests to the custom domain crockpot.app.

## Technologies Used
- Next.JS
- Typescript
- Tailwind
- Radix
- React Query
- Axios
- Vercel

## Known Bugs

By the end of development, we were pretty ready to just start using the application - as such some bugs slipped through the cracks. All are minor, either in functionality or aesthetics, but are very much priority number 1 when we decide we're ready to start releasing new builds of the application to production. We'll be adding to this list as more small bugs get spotted through use in production.

- Padding or margin required in the 'Add Extra Item' modal
- Editing a recipe through the recipe modal does not refresh the client state on save
- Shopping list accordion doesn't animate smoothly enough
- Deleting an item from the shopping list or increasing its quantity, followed by removing the recipe from your menu that utilises this item will lead to unexpected results in the shopping list such as minus values or unintended additions.

## Future Releases

This project took a lot of time to complete in the current state, and several compromises were made in terms of design, code composition, and functionality just to get it deployed in a somewhat timely manner. That being said, there are tonnes of things we'd like to achieve on future releases that I'll try to briefly summarise here:

- Fix all the previously mentioned bugs, and any more that get highlighted in the meantime
- In general, retool the codebase to follow Next.JS conventions more closely - this includes using middleware and server side requests by phasing out use of react query. A larger, related goal is to move away from the Express backend and have all backend functionality live inside the same Next.JS project
- Refactor larger pieces of code into global components or custom hooks to improve readability and maintainability - we achieved this in some parts of the code but not all. Forms in particular were done quite ad hoc and could do with globalising
- Custom error pages
- Add more animations, rethink some of the design to modernise the aesthetics
- Implement optimistic updates where possible to improve the snappiness of the site, too much relies on responses from the server
- Infinite scroll for the browse page, we're getting to the point where the load time will be compromised by the amount of recipes we're storing
- Add extra features, like 'commonly bought items' to speed up shopping list generation
- Make an entirely new model for 'Units' as these are currently hard coded

